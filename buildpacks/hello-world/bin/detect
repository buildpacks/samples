#!/usr/bin/env bash
set -eo pipefail

echo "---> Hello World Buildpack"

# 1. View inputs
echo "     Working directory:         $(pwd)"
echo "     CNB_BUILDPACK_DIR:         ${CNB_BUILDPACK_DIR}"
echo "     CNB_BUILD_PLAN_PATH:       ${CNB_BUILD_PLAN_PATH}"
echo "     CNB_PLATFORM_DIR:          ${CNB_PLATFORM_DIR}"
echo "     CNB_TARGET_ARCH:           ${CNB_TARGET_ARCH}"
echo "     CNB_TARGET_ARCH_VARIANT:   ${CNB_TARGET_ARCH_VARIANT}"
echo "     CNB_TARGET_DISTRO_NAME:    ${CNB_TARGET_DISTRO_NAME}"
echo "     CNB_TARGET_DISTRO_VERSION: ${CNB_TARGET_DISTRO_VERSION}"
echo "     CNB_TARGET_OS:             ${CNB_TARGET_OS}"
echo "     HOME:                      ${HOME}"
echo "     PATH:                      ${PATH}"
echo

# 2. Declare dependencies (optional)
cat >> "${CNB_BUILD_PLAN_PATH}" <<EOL
# Buildpack provides this dependency
#
# NOTE: The dependency is provided during the 'build' process.
#
[[provides]]
name = "some-world"

# Buildpack requires this dependency
#
# NOTE: Everything aside from 'name' is simply additional information that the providing buildpack can use to resolve
#       the dependency.
#
[[requires]]
name = "some-world"
EOL

# 3. Exit without error to opt-in to the build
echo "---> Done"
